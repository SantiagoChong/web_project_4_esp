!function(){"use strict";var e=document.querySelectorAll(".popup"),t=(document.querySelector(".form_profile"),document.querySelector(".profile__title")),r=document.querySelector(".profile__text"),n=document.querySelector(".popup_profile"),o=document.querySelector("#name"),i=document.querySelector("#description"),u=(document.querySelector(".form_new-card"),document.querySelector(".profile__add-button")),c=document.querySelector(".profile__edit-button"),l=document.querySelector(".popup_new-card"),a=(document.querySelector("#title"),document.querySelector("#image"),document.querySelector(".popup_image")),s=document.querySelector(".popup__image"),f=document.querySelector(".popup__image-title"),p=document.querySelector(".cards"),y={template:".template__cards",cardSelector:".cards__item",imageSelector:".cards__image",textSelector:".cards__text",popupImageSelector:".popup_image",likeButton:".cards__like-button",deleteButton:".cards__delete-button"},m={formSelector:".popup__container",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===d(o)?o:String(o)),n)}var o}var b=function(){function e(t,r){var n=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=n,this._renderer=o,this._container=r}var t,r;return t=e,(r=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._data.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===h(o)?o:String(o)),n)}var o}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._handleEscCloseBind=this._handleEscClose.bind(this),this.setEventListeners()}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBind)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBind)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close(),t.target.classList.contains("popup__toggle")&&e.close()}))}}])&&_(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===g(o)?o:String(o)),n)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=j(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},E.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return O(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(r=[{key:"open",value:function(e,t){E(P(u.prototype),"open",this).call(this),s.alt=e,s.src=t,f.textContent=e}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(S);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===C(o)?o:String(o)),n)}var o}var x=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t.title,this._url=t.url,this._configSelector=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._configSelector.template).content.querySelector(this._configSelector.cardSelector).cloneNode(!0)}},{key:"createCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(this._configSelector.textSelector).textContent=this._title,this._element.querySelector(this._configSelector.imageSelector).src=this._url,this._element}},{key:"handleOpenPopup",value:function(){new L(a).open(this._title,this._url)}},{key:"_deleteCard",value:function(){this._element.remove()}},{key:"_likeCard",value:function(){this._element.querySelector(this._configSelector.likeButton).classList.toggle("cards__like-button_active")}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(this._configSelector.imageSelector).addEventListener("click",(function(){e.handleOpenPopup()})),this._element.querySelector(this._configSelector.deleteButton).addEventListener("click",(function(){e._deleteCard()})),this._element.querySelector(this._configSelector.likeButton).addEventListener("click",(function(){e._likeCard()}))}}])&&q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===B(o)?o:String(o)),n)}var o}var I=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._configForm=r}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._configForm.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._configForm.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._configForm.inputErrorClass),t.classList.remove(this._configForm.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e){this._hasInvalidInput()?(e.classList.add(this._configForm.inactiveButtonClass),e.disabled=!0):(e.classList.remove(this._configForm.inactiveButtonClass),e.disabled=!1)}},{key:"_setEvtListener",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._configForm.inputSelector));var t=this._formElement.querySelector(this._configForm.submitButtonSelector);this._toggleButtonState(t),this._formElement.addEventListener("reset",(function(){setTimeout((function(){e._toggleButtonState(t)}),0)})),this._inputList.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t)}))}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.querySelectorAll(this._configForm.formSelector).forEach((function(){e._formElement.addEventListener("submit",(function(e){e.preventDefault()})),e._setEvtListener()}))}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===R(o)?o:String(o)),n)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=D(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},F.apply(this,arguments)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function N(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(n);if(o){var r=J(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return N(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._handleSubmit=t,r}return t=u,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popupSelector.querySelectorAll(m.inputSelector),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){F(J(u.prototype),"close",this).call(this),this._popupSelector.querySelector(m.formSelector).reset()}},{key:"setEventListeners",value:function(){var e=this;F(J(u.prototype),"setEventListeners",this).call(this),this._popupSelector.querySelector(m.formSelector).addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues()),e.close()}))}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(S);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===M(o)?o:String(o)),n)}var o}var Y=new(function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=t,this._descriptionJob=r}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,description:this._descriptionJob.textContent}}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._descriptionJob.textContent=t}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())(t,r);Y.setUserInfo("Jacques Cousteau","Explorador"),c.addEventListener("click",(function(){z.open()}));var z=new U(n,(function(e){Y.setUserInfo(e.name,e.description)}));o.value=t.textContent,i.value=r.textContent,e.forEach((function(e){return function(e){new I(e,m).enableValidation()}(e)}));var G=new b({data:[{title:"Lago di Braies",url:"https://code.s3.yandex.net/web-code/lago.jpg"},{title:"Parque Nacional de la Vanoise",url:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Latemar",url:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Montañas Calvas",url:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Lago Louise",url:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Valle de Yosemite",url:"https://code.s3.yandex.net/web-code/yosemite.jpg"}],renderer:function(e){var t=new x(e,y).createCard();G.addItem(t)}},p);G.renderItems();var K=new U(l,(function(e){var t=new x({title:e.title,url:e.image},y);p.prepend(t.createCard())}));u.addEventListener("click",(function(){K.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVAsQ0FDRUQsTUFBTyxrQkFDUEMsSUFBSywwREFFUCxDQUNFRCxNQUFPLGNBQ1BDLElBQUssdURBRVAsQ0FDRUQsTUFBTyxvQkFDUEMsSUFBSyxxRFFOTDlCLFNBQVUsU0FBQytGLEdBQ1QsSUFDTUMsRUFEVSxJQUFJOUQsRUFBSzZELEVBQVVqSCxHQUNQbUgsYUFFNUJILEVBQWFJLFFBQVFGLEVBQ3ZCLEdBRUZuSCxHQUdGaUgsRUFBYUssY0FPYixJQUFNQyxFQUFVLElBQUkxQixFQUFjakcsR0FBYyxTQUFDNEgsR0FDL0MsSUFBTUMsRUFBVSxJQUFJcEUsRUFDbEIsQ0FDRUwsTUFBT3dFLEVBQVd4RSxNQUNsQkMsSUFBS3VFLEVBQVdFLE9BRWxCekgsR0FFRkQsRUFBZTZCLFFBQVE0RixFQUFRTCxhQUNqQyxJQUVBMUgsRUFBYzZDLGlCQUFpQixTQWYvQixXQUNFZ0YsRUFBUXhELE1BQ1YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwXCIpO1xuXG4vL3V0aWxzIHByb2ZpbGVcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBkZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RleHRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcblxuLy91dGlscyBjYXJkXG5leHBvcnQgY29uc3QgbmV3Q2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fbmV3LWNhcmRcIik7XG5leHBvcnQgY29uc3QgbmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cE5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX25ldy1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xuXG4vL2luZGV4XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZ0NhcmRTZWxlY3RvcnMgPSB7XG4gIHRlbXBsYXRlOiBcIi50ZW1wbGF0ZV9fY2FyZHNcIixcbiAgY2FyZFNlbGVjdG9yOiBcIi5jYXJkc19faXRlbVwiLFxuICBpbWFnZVNlbGVjdG9yOiBcIi5jYXJkc19faW1hZ2VcIixcbiAgdGV4dFNlbGVjdG9yOiBcIi5jYXJkc19fdGV4dFwiLFxuICBwb3B1cEltYWdlU2VsZWN0b3I6IFwiLnBvcHVwX2ltYWdlXCIsXG4gIGxpa2VCdXR0b246IFwiLmNhcmRzX19saWtlLWJ1dHRvblwiLFxuICBkZWxldGVCdXR0b246IFwiLmNhcmRzX19kZWxldGUtYnV0dG9uXCIsXG59O1xuXG4vL2Zvcm1WYWxpZGF0b3JcbmV4cG9ydCBjb25zdCBjb25maWdGb3JtU2VsZWN0b3JzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19jb250YWluZXJcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2l0ZW1cIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faXRlbV90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW0tZXJyb3JfYWN0aXZlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzRGF0YSA9IFtcbiAge1xuICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgIHVybDogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTGF0ZW1hclwiLFxuICAgIHVybDogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxuICAgIHVybDogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXG4gIH0sXG5dO1xuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7ZGF0YSwgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuY2xlYXIoKTtcblxuICAgIHRoaXMuX2RhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQmluZCA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VCaW5kKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZUJpbmQpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fdG9nZ2xlXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtQb3B1cH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcbmltcG9ydCB7cG9wdXBJbWFnZSwgcG9wdXBJbWFnZVRpdGxlfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3Blbih0aXRsZSwgdXJsKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHBvcHVwSW1hZ2UuYWx0ID0gdGl0bGU7XG4gICAgcG9wdXBJbWFnZS5zcmMgPSB1cmw7XG5cbiAgICBwb3B1cEltYWdlVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgfVxufVxuIiwiaW1wb3J0IHtQb3B1cFdpdGhJbWFnZX0gZnJvbSBcIi4vUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7cG9wdXBJbWFnZUNvbnRhaW5lcn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNvbmZpZ1NlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX3VybCA9IGRhdGEudXJsO1xuICAgIHRoaXMuX2NvbmZpZ1NlbGVjdG9yID0gY29uZmlnU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnU2VsZWN0b3IudGVtcGxhdGUpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZ1NlbGVjdG9yLmNhcmRTZWxlY3RvcilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnU2VsZWN0b3IudGV4dFNlbGVjdG9yKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWdTZWxlY3Rvci5pbWFnZVNlbGVjdG9yKS5zcmMgPSB0aGlzLl91cmw7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIGhhbmRsZU9wZW5Qb3B1cCgpIHtcbiAgICBjb25zdCBwb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlQ29udGFpbmVyKTtcbiAgICBwb3B1cC5vcGVuKHRoaXMuX3RpdGxlLCB0aGlzLl91cmwpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnU2VsZWN0b3IubGlrZUJ1dHRvbikuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRzX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZ1NlbGVjdG9yLmltYWdlU2VsZWN0b3IpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZU9wZW5Qb3B1cCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZ1NlbGVjdG9yLmRlbGV0ZUJ1dHRvbikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWdTZWxlY3Rvci5saWtlQnV0dG9uKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fbGlrZUNhcmQoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgY29uZmlnRm9ybSkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fY29uZmlnRm9ybSA9IGNvbmZpZ0Zvcm07XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZ0Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnRm9ybS5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnRm9ybS5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZ0Zvcm0uZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uRWxlbWVudCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZ0Zvcm0uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZ0Zvcm0uaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2dExpc3RlbmVyKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWdGb3JtLmlucHV0U2VsZWN0b3IpKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWdGb3JtLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50KTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgfSwgMCk7XG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnRm9ybS5mb3JtU2VsZWN0b3IpO1xuICAgIGZvcm1MaXN0LmZvckVhY2goKCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9zZXRFdnRMaXN0ZW5lcigpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtjb25maWdGb3JtU2VsZWN0b3JzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZ0Zvcm1TZWxlY3RvcnMuaW5wdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoY29uZmlnRm9ybVNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3Rvcihjb25maWdGb3JtU2VsZWN0b3JzLmZvcm1TZWxlY3RvcikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWUsIGRlc2NyaXB0aW9uSm9iKSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkpvYiA9IGRlc2NyaXB0aW9uSm9iO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uSm9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkpvYi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG5cbi8qY2xhc3MgVXNlckluZm8ge1xuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBuYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuICAgIGNvbnN0IGFib3V0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dFwiKTtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBuYW1lQ29udGFpbmVyLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IGFib3V0Q29udGFpbmVyLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XG4gICAgY29uc3QgbmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbiAgICBjb25zdCBhYm91dENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXRcIik7XG5cbiAgICBuYW1lQ29udGFpbmVyLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBhYm91dENvbnRhaW5lci50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59Ki9cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gIGNhcmRzQ29udGFpbmVyLFxuICBjb25maWdDYXJkU2VsZWN0b3JzLFxuICBwb3B1cHMsXG4gIGNvbmZpZ0Zvcm1TZWxlY3RvcnMsXG4gIG5hbWVFbGVtZW50LFxuICBkZXNjcmlwdGlvbkVsZW1lbnQsXG4gIG5hbWVJbnB1dCxcbiAgZGVzY3JpcHRpb25JbnB1dCxcbiAgcG9wdXBQcm9maWxlLFxuICBwb3B1cE5ld0NhcmQsXG4gIGluaXRpYWxDYXJkc0RhdGEsXG4gIG5ld0NhcmRCdXR0b24sXG4gIGVkaXRCdXR0b24sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQge0NhcmR9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSBcIi4uL3V0aWxzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7UG9wdXBXaXRoRm9ybX0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHtVc2VySW5mb30gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuLy9Vc2VyIEluZm9ybWF0aW9uXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhuYW1lRWxlbWVudCwgZGVzY3JpcHRpb25FbGVtZW50KTtcbnVzZXJJbmZvLnNldFVzZXJJbmZvKFwiSmFjcXVlcyBDb3VzdGVhdVwiLCBcIkV4cGxvcmFkb3JcIik7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBQcm9maWxlRm9ybS5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZSwgcHJvZmlsZUZvcm1TdWJtaXQpO1xuXG5mdW5jdGlvbiBwcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5kZXNjcmlwdGlvbik7XG59XG5cbmZ1bmN0aW9uIHBvcHVwVmFsdWVzKCkge1xuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudDtcbn1cbnBvcHVwVmFsdWVzKCk7XG5cbi8vVmFsaWRhdGUgRm9ybXNcbmZ1bmN0aW9uIGZvcm1WYWxpZGF0aW9uKGZvcm0pIHtcbiAgY29uc3QgZm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtLCBjb25maWdGb3JtU2VsZWN0b3JzKTtcbiAgZm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVBvcHVwc0Zvcm1zKCkge1xuICBwb3B1cHMuZm9yRWFjaCgoZm9ybSkgPT4gZm9ybVZhbGlkYXRpb24oZm9ybSkpO1xufVxuXG52YWxpZGF0ZVBvcHVwc0Zvcm1zKCk7XG5cbi8vSW5pdGlhbCBDYXJkc1xuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBkYXRhOiBpbml0aWFsQ2FyZHNEYXRhLFxuICAgIHJlbmRlcmVyOiAoY2FyZEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkSXRlbSwgY29uZmlnQ2FyZFNlbGVjdG9ycyk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuY3JlYXRlQ2FyZCgpO1xuXG4gICAgICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZHNDb250YWluZXJcbik7XG5cbnNlY3Rpb25DYXJkcy5yZW5kZXJJdGVtcygpO1xuXG4vL0FkZCBDYXJkc1xuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZCgpIHtcbiAgYWRkQ2FyZC5vcGVuKCk7XG59XG5cbmNvbnN0IGFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cE5ld0NhcmQsIChmb3JtVmFsdWVzKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICB0aXRsZTogZm9ybVZhbHVlcy50aXRsZSxcbiAgICAgIHVybDogZm9ybVZhbHVlcy5pbWFnZSxcbiAgICB9LFxuICAgIGNvbmZpZ0NhcmRTZWxlY3RvcnNcbiAgKTtcbiAgY2FyZHNDb250YWluZXIucHJlcGVuZChuZXdDYXJkLmNyZWF0ZUNhcmQoKSk7XG59KTtcblxubmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQ2FyZCk7XG4iXSwibmFtZXMiOlsicG9wdXBzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmFtZUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVzY3JpcHRpb25FbGVtZW50IiwicG9wdXBQcm9maWxlIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsIm5ld0NhcmRCdXR0b24iLCJlZGl0QnV0dG9uIiwicG9wdXBOZXdDYXJkIiwicG9wdXBJbWFnZUNvbnRhaW5lciIsInBvcHVwSW1hZ2UiLCJwb3B1cEltYWdlVGl0bGUiLCJjYXJkc0NvbnRhaW5lciIsImNvbmZpZ0NhcmRTZWxlY3RvcnMiLCJ0ZW1wbGF0ZSIsImNhcmRTZWxlY3RvciIsImltYWdlU2VsZWN0b3IiLCJ0ZXh0U2VsZWN0b3IiLCJwb3B1cEltYWdlU2VsZWN0b3IiLCJsaWtlQnV0dG9uIiwiZGVsZXRlQnV0dG9uIiwiY29uZmlnRm9ybVNlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiZGF0YSIsInJlbmRlcmVyIiwidGhpcyIsIl9kYXRhIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsImNsZWFyIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlQmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJzZXRFdmVudExpc3RlbmVycyIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwidGl0bGUiLCJ1cmwiLCJhbHQiLCJzcmMiLCJ0ZXh0Q29udGVudCIsIkNhcmQiLCJjb25maWdTZWxlY3RvciIsIl90aXRsZSIsIl91cmwiLCJfY29uZmlnU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuIiwidG9nZ2xlIiwiaGFuZGxlT3BlblBvcHVwIiwiX2RlbGV0ZUNhcmQiLCJfbGlrZUNhcmQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJjb25maWdGb3JtIiwiX2Zvcm1FbGVtZW50IiwiX2NvbmZpZ0Zvcm0iLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9pbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNldFRpbWVvdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZ0TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJkZXNjcmlwdGlvbkpvYiIsIl91c2VyTmFtZSIsIl9kZXNjcmlwdGlvbkpvYiIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJwb3B1cFByb2ZpbGVGb3JtIiwiZm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtVmFsaWRhdGlvbiIsInNlY3Rpb25DYXJkcyIsImNhcmRJdGVtIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiYWRkQ2FyZCIsImZvcm1WYWx1ZXMiLCJuZXdDYXJkIiwiaW1hZ2UiXSwic291cmNlUm9vdCI6IiJ9